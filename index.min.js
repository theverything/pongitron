(function(e){var t=49;var o=86;var n=t;var r=o;var s="red";var i="blue";var a=new Audio("switch.mp3");var l=new Audio("ping.mp3");var f=new Audio("win.mp3");var u=new Audio("deuce.mp3");function c(e){return Array.prototype.slice.call(e)}function w(){if(!(this instanceof w)){return new w}this._score={one:0,two:0};this.callback=function(){}}Object.defineProperties(w.prototype,{one:{get:function(){return this._score.one},set:function(e){this._score.one=e;this.callback(this._score);return e}},two:{get:function(){return this._score.two},set:function(e){this._score.two=e;this.callback(this._score);return e}}});w.prototype.watch=function(e){this.callback=e};w.prototype.zeros=function(){this._score={one:0,two:0};this.callback(this._score)};w.prototype.deuces=function(){this._score={one:"D",two:"D"};this.callback(this._score)};var y=w();var p=e.getElementById("player-one");var d=e.getElementById("player-two");var v={one:{resetCounter:0,reset:false,lastTime:null},two:{resetCounter:0,reset:false,lastTime:null}};c(e.querySelectorAll(".player")).map(function(e){var t=e.offsetHeight/2;e.style.fontSize=t+"px"});function m(e){p.innerHTML=e.one;d.innerHTML=e.two}y.watch(function(e){var t=e.one+e.two;m(e);if(t===40){u.play();A()}else if(t%5===0&&t!==0){a.play()}});function C(t){e.body.className+=" "+t;setTimeout(function(){e.body.className=e.body.className.replace(t,"").trim()},250)}function h(e){var t;var o;if(Date.now()-v.one.lastTime<500){}else if(e.keyCode===n&&!v.one.reset){l.play();C(s);t=y.one+1;if(t>20){y.one=0}else{y.one=t}v.one.lastTime=Date.now();v.one.resetCounter=0}else if(v.one.reset){v.one.reset=false;v.one.resetCounter=0}if(Date.now()-v.two.lastTime<500){}else if(e.keyCode===r&&!v.two.reset){l.play();C(i);o=y.two+1;if(o>20){y.two=0}else{y.two=o}v.two.lastTime=Date.now();v.two.resetCounter=0}else if(v.two.reset){v.two.reset=false;v.two.resetCounter=0}}function k(e){if(e.keyCode===n){v.one.resetCounter++;if(v.one.resetCounter===10){l.play();v.one.reset=true;y.one=0}}if(e.keyCode===r){v.two.resetCounter++;if(v.two.resetCounter===10){l.play();v.two.reset=true;y.two=0}}}function D(e){if(Date.now()-v.one.lastTime<500){}else if(e.keyCode===n&&!v.one.reset){l.play();C(s);if(y.one==="D"&&y.two==="D"){l.play();y.one="A"}else if(y.one==="D"&&y.two==="A"){l.play();y.two="D"}else{f.play();b()}v.one.lastTime=Date.now();v.one.resetCounter=0}else if(v.one.reset){v.one.reset=false;v.one.resetCounter=0}if(Date.now()-v.two.lastTime<500){}else if(e.keyCode===r&&!v.two.reset){l.play();C(i);if(y.two==="D"&&y.one==="D"){l.play();y.two="A"}else if(y.two==="D"&&y.one==="A"){l.play();y.one="D"}else{f.play();b()}v.two.lastTime=Date.now();v.two.resetCounter=0}else if(v.two.reset){v.two.reset=false;v.two.resetCounter=0}}function T(e){if(e.keyCode===n||e.keyCode===r){v.one.resetCounter++;v.two.resetCounter++;if(v.one.resetCounter===10||v.two.resetCounter===10){l.play();v.one.reset=true;v.two.reset=true;E();b()}}}function b(){E();y.zeros();e.addEventListener("keydown",k,false);e.addEventListener("keyup",h,false)}function _(){e.removeEventListener("keydown",k,false);e.removeEventListener("keyup",h,false)}function A(){_();y.deuces();e.addEventListener("keydown",T,false);e.addEventListener("keyup",D,false)}function E(){e.removeEventListener("keydown",T,false);e.removeEventListener("keyup",D,false)}b()})(document);